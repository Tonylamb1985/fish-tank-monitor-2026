###############################################################################
# ğŸ“¦ DASHBOARD: fish_tank_dashboard.yaml
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Freshwater Fish Tank Monitor â€” Lovelace Dashboard
#
# INSTALL:
#   1. Settings â†’ Dashboards â†’ Add Dashboard â†’ name "Freshwater Tank"
#   2. Click dashboard â†’ â‹® â†’ Edit â†’ â‹® â†’ Raw Configuration Editor
#   3. Paste this file â†’ Save
#
# REQUIRES ALL PACKAGES TO BE INSTALLED FIRST:
#   config/packages/fish_tank_helpers.yaml
#   config/packages/fish_tank_sensors.yaml
#   config/packages/fish_tank_automations.yaml
#   config/packages/fish_tank_scripts.yaml
#
# REQUIRED HACS FRONTEND CARDS:
#   â€¢ custom:mini-graph-card
#   â€¢ custom:button-card
#   â€¢ custom:apexcharts-card
#   â€¢ custom:mushroom-template-card
#   â€¢ custom:bar-card
###############################################################################

title: ğŸŸ Freshwater Tank
icon: mdi:fishbowl-outline
views:

  ###########################################################################
  # VIEW 1 â€” OVERVIEW
  ###########################################################################
  - title: Overview
    icon: mdi:view-dashboard
    path: overview
    background: radial-gradient(ellipse at top, #071a10 0%, #050f0a 60%, #020805 100%)
    type: custom:grid-layout
    layout:
      grid-template-columns: repeat(4, 1fr)
      gap: 12px
      margin: 12px
    badges: []
    cards:

      # â”€â”€ HEADER STATUS BANNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:mushroom-template-card
        grid-column: 1 / -1
        primary: "ğŸŸ Freshwater Community Tank â€” 55 Gallon"
        secondary: "{{ state_attr('sensor.fish_tank_overall_status','message') }}"
        icon: mdi:fishbowl
        icon_color: >
          {% set s = states('sensor.fish_tank_overall_status') %}
          {% if s == 'critical' %}red{% elif s == 'warning' %}orange{% else %}green{% endif %}
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, rgba(34,197,94,0.12), rgba(16,122,60,0.07));
              border: 1px solid rgba(34,197,94,0.35);
              border-radius: 16px;
              padding: 4px;
            }

      # â”€â”€ HEALTH SCORE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:apexcharts-card
        grid-column: span 1
        header:
          show: true
          title: "ğŸ’š Tank Health Score"
          show_states: true
          colorize_states: true
        apex_config:
          chart:
            type: radialBar
            height: 180
            background: transparent
          plotOptions:
            radialBar:
              startAngle: -135
              endAngle: 135
              hollow:
                size: 55%
              dataLabels:
                name:
                  show: false
                value:
                  fontSize: 28px
                  fontWeight: 700
                  color: "#ffffff"
                  formatter: "function(val) { return val + '%'; }"
              track:
                background: "#071a10"
          fill:
            type: gradient
            gradient:
              shade: dark
              type: horizontal
              gradientToColors: ["#4ade80"]
              stops: [0, 100]
          colors: ["#16a34a"]
        series:
          - entity: sensor.fish_tank_health_score
            name: Health
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(34,197,94,0.3);
              border-radius: 14px;
            }

      # â”€â”€ TEMPERATURE GAUGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:apexcharts-card
        grid-column: span 1
        header:
          show: true
          title: "ğŸŒ¡ Temperature"
          show_states: true
          colorize_states: true
        apex_config:
          chart:
            type: radialBar
            height: 180
            background: transparent
          plotOptions:
            radialBar:
              startAngle: -135
              endAngle: 135
              hollow:
                size: 55%
              dataLabels:
                name:
                  show: false
                value:
                  fontSize: 22px
                  fontWeight: 700
                  color: "#ffffff"
                  formatter: "function(val) { return (val/100*30+60).toFixed(1)+'Â°F'; }"
              track:
                background: "#071a10"
          fill:
            type: gradient
            gradient:
              shade: dark
              type: horizontal
              gradientToColors: ["#ff7043"]
              stops: [0, 100]
          colors: ["#29b6f6"]
        series:
          - entity: sensor.fish_tank_temperature
            transform: "return ((x - 60) / 30) * 100;"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(255,112,67,0.3);
              border-radius: 14px;
            }

      # â”€â”€ pH GAUGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:apexcharts-card
        grid-column: span 1
        header:
          show: true
          title: "âš— pH Level"
          show_states: true
          colorize_states: true
        apex_config:
          chart:
            type: radialBar
            height: 180
            background: transparent
          plotOptions:
            radialBar:
              startAngle: -135
              endAngle: 135
              hollow:
                size: 55%
              dataLabels:
                name:
                  show: false
                value:
                  fontSize: 22px
                  fontWeight: 700
                  color: "#ffffff"
                  formatter: "function(val) { return (val/100*3+5.5).toFixed(1); }"
              track:
                background: "#071a10"
          fill:
            type: gradient
            gradient:
              shade: dark
              type: horizontal
              gradientToColors: ["#ce93d8"]
              stops: [0, 100]
          colors: ["#7e57c2"]
        series:
          - entity: sensor.fish_tank_ph
            transform: "return ((x - 5.5) / 3) * 100;"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(171,71,188,0.3);
              border-radius: 14px;
            }

      # â”€â”€ DISSOLVED OXYGEN GAUGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:apexcharts-card
        grid-column: span 1
        header:
          show: true
          title: "ğŸ«§ Dissolved O2"
          show_states: true
          colorize_states: true
        apex_config:
          chart:
            type: radialBar
            height: 180
            background: transparent
          plotOptions:
            radialBar:
              startAngle: -135
              endAngle: 135
              hollow:
                size: 55%
              dataLabels:
                name:
                  show: false
                value:
                  fontSize: 22px
                  fontWeight: 700
                  color: "#ffffff"
                  formatter: "function(val) { return (val/100*12).toFixed(1)+' mg/L'; }"
              track:
                background: "#071a10"
          fill:
            type: gradient
            gradient:
              shade: dark
              type: horizontal
              gradientToColors: ["#80deea"]
              stops: [0, 100]
          colors: ["#00838f"]
        series:
          - entity: sensor.fish_tank_dissolved_o2
            transform: "return (x / 12) * 100;"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(38,198,218,0.3);
              border-radius: 14px;
            }

      # â”€â”€ NITROGEN CYCLE BARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: entities
        grid-column: 1 / 3
        title: "â˜£ Nitrogen Cycle"
        entities:
          - type: custom:bar-card
            entity: sensor.fish_tank_ammonia
            name: "Ammonia NHâ‚ƒ  (safe: 0 ppm)"
            icon: mdi:flask-remove-outline
            severity:
              - color: "#4caf50"
                from: 0
                to: 0.01
              - color: "#ff9800"
                from: 0.01
                to: 0.25
              - color: "#f44336"
                from: 0.25
                to: 4
            max: 4
            min: 0
            unit_of_measurement: ppm
          - type: custom:bar-card
            entity: sensor.fish_tank_nitrite
            name: "Nitrite NOâ‚‚  (safe: 0 ppm)"
            icon: mdi:test-tube-off
            severity:
              - color: "#4caf50"
                from: 0
                to: 0.01
              - color: "#ff9800"
                from: 0.01
                to: 0.25
              - color: "#f44336"
                from: 0.25
                to: 5
            max: 5
            min: 0
            unit_of_measurement: ppm
          - type: custom:bar-card
            entity: sensor.fish_tank_nitrate
            name: "Nitrate NOâ‚ƒ  (safe: < 20 ppm)"
            icon: mdi:water-percent
            severity:
              - color: "#4caf50"
                from: 0
                to: 20
              - color: "#ff9800"
                from: 20
                to: 40
              - color: "#f44336"
                from: 40
                to: 80
            max: 80
            min: 0
            unit_of_measurement: ppm
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(239,83,80,0.25);
              border-radius: 14px;
            }

      # â”€â”€ WATER HARDNESS + QUALITY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: entities
        grid-column: 3 / 5
        title: "ğŸ’§ Water Hardness & Quality"
        entities:
          - type: custom:bar-card
            entity: sensor.fish_tank_gh
            name: "GH â€” General Hardness  (ideal: 4â€“12 dGH)"
            icon: mdi:water-opacity
            severity:
              - color: "#f44336"
                from: 0
                to: 3
              - color: "#4caf50"
                from: 3
                to: 12
              - color: "#ff9800"
                from: 12
                to: 20
              - color: "#f44336"
                from: 20
                to: 30
            max: 30
            min: 0
            unit_of_measurement: dGH
          - type: custom:bar-card
            entity: sensor.fish_tank_kh
            name: "KH â€” Carbonate Hardness  (ideal: 4â€“8 dKH)"
            icon: mdi:shield-water
            severity:
              - color: "#f44336"
                from: 0
                to: 3
              - color: "#4caf50"
                from: 3
                to: 8
              - color: "#ff9800"
                from: 8
                to: 12
              - color: "#f44336"
                from: 12
                to: 20
            max: 20
            min: 0
            unit_of_measurement: dKH
          - entity: sensor.fish_tank_tds
            name: "TDS  (ideal: 100â€“300 ppm)"
            icon: mdi:water-check
          - entity: sensor.fish_tank_turbidity
            name: "Turbidity  (ideal: 0â€“5 NTU)"
            icon: mdi:eye-outline
          - entity: sensor.fish_tank_water_level
            name: "Water Level"
            icon: mdi:waves
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(41,182,246,0.25);
              border-radius: 14px;
            }

      # â”€â”€ COâ‚‚ (Planted Tank) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:apexcharts-card
        grid-column: span 2
        header:
          show: true
          title: "ğŸŒ¿ COâ‚‚ Level (Planted Tank - ideal: 15-30 ppm)"
          show_states: true
          colorize_states: true
        apex_config:
          chart:
            type: radialBar
            height: 180
            background: transparent
          plotOptions:
            radialBar:
              startAngle: -135
              endAngle: 135
              hollow:
                size: 50%
              dataLabels:
                name:
                  show: false
                value:
                  fontSize: 22px
                  fontWeight: 700
                  color: "#ffffff"
                  formatter: "function(val) { return Math.round(val/100*60)+' ppm'; }"
              track:
                background: "#071a10"
          fill:
            type: gradient
            gradient:
              shade: dark
              type: horizontal
              gradientToColors: ["#a3e635"]
              stops: [0, 100]
          colors: ["#16a34a"]
        series:
          - entity: sensor.fish_tank_co2
            transform: "return (x / 60) * 100;"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(34,197,94,0.3);
              border-radius: 14px;
            }

      # â”€â”€ TEMPERATURE HISTORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:mini-graph-card
        grid-column: 1 / 3
        name: "Temperature - Last 24h"
        icon: mdi:thermometer-water
        entities:
          - entity: sensor.fish_tank_temperature
            name: Temp
            color: "#ff7043"
        hours_to_show: 24
        points_per_hour: 4
        line_width: 2
        smoothing: true
        show:
          extrema: true
          average: true
        color_thresholds:
          - color: "#2196f3"
            value: 60
          - color: "#ff9800"
            value: 72
          - color: "#4caf50"
            value: 74
          - color: "#ff9800"
            value: 80
          - color: "#f44336"
            value: 82
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(255,112,67,0.25);
              border-radius: 14px;
            }

      # â”€â”€ pH HISTORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: custom:mini-graph-card
        grid-column: 3 / 5
        name: "pH - Last 24h"
        icon: mdi:ph
        entities:
          - entity: sensor.fish_tank_ph
            name: pH
            color: "#ab47bc"
        hours_to_show: 24
        points_per_hour: 4
        line_width: 2
        smoothing: true
        show:
          extrema: true
          average: true
        color_thresholds:
          - color: "#f44336"
            value: 5.5
          - color: "#ff9800"
            value: 6.2
          - color: "#4caf50"
            value: 6.5
          - color: "#ff9800"
            value: 7.5
          - color: "#f44336"
            value: 7.8
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(171,71,188,0.25);
              border-radius: 14px;
            }

      # â”€â”€ EQUIPMENT CONTROL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: grid
        grid-column: 1 / 3
        title: "âš™ï¸ Equipment Control"
        columns: 3
        square: false
        cards:
          - type: custom:button-card
            entity: switch.fish_tank_filter
            name: Filter
            icon: mdi:air-filter
            tap_action:
              action: toggle
            styles:
              card:
                - background: >
                    [[[ return entity.state==='on'
                      ?'linear-gradient(135deg,#0a2e14,#061a0c)'
                      :'linear-gradient(135deg,#141414,#0d0d0d)']]]
                - border: >
                    [[[ return entity.state==='on'
                      ?'1px solid rgba(34,197,94,0.5)'
                      :'1px solid rgba(255,255,255,0.08)']]]
                - border-radius: 12px
                - padding: 16px 8px
              icon:
                - color: >
                    [[[ return entity.state==='on'?'#4ade80':'#444']]]
              name:
                - color: >
                    [[[ return entity.state==='on'?'#dcfce7':'#444']]]
                - font-size: 12px

          - type: custom:button-card
            entity: switch.fish_tank_heater
            name: Heater
            icon: mdi:radiator
            tap_action:
              action: toggle
            styles:
              card:
                - background: >
                    [[[ return entity.state==='on'
                      ?'linear-gradient(135deg,#2e1004,#1a0902)'
                      :'linear-gradient(135deg,#141414,#0d0d0d)']]]
                - border: >
                    [[[ return entity.state==='on'
                      ?'1px solid rgba(255,112,67,0.5)'
                      :'1px solid rgba(255,255,255,0.08)']]]
                - border-radius: 12px
                - padding: 16px 8px
              icon:
                - color: >
                    [[[ return entity.state==='on'?'#fb923c':'#444']]]
              name:
                - color: >
                    [[[ return entity.state==='on'?'#ffedd5':'#444']]]
                - font-size: 12px

          - type: custom:button-card
            entity: switch.fish_tank_air_pump
            name: Air Pump
            icon: mdi:air-purifier
            tap_action:
              action: toggle
            styles:
              card:
                - background: >
                    [[[ return entity.state==='on'
                      ?'linear-gradient(135deg,#082a2e,#05181c)'
                      :'linear-gradient(135deg,#141414,#0d0d0d)']]]
                - border: >
                    [[[ return entity.state==='on'
                      ?'1px solid rgba(38,198,218,0.5)'
                      :'1px solid rgba(255,255,255,0.08)']]]
                - border-radius: 12px
                - padding: 16px 8px
              icon:
                - color: >
                    [[[ return entity.state==='on'?'#22d3ee':'#444']]]
              name:
                - color: >
                    [[[ return entity.state==='on'?'#cffafe':'#444']]]
                - font-size: 12px

          - type: custom:button-card
            entity: switch.fish_tank_co2_regulator
            name: COâ‚‚ Reg.
            icon: mdi:molecule-co2
            tap_action:
              action: toggle
            styles:
              card:
                - background: >
                    [[[ return entity.state==='on'
                      ?'linear-gradient(135deg,#142e0a,#0c1a06)'
                      :'linear-gradient(135deg,#141414,#0d0d0d)']]]
                - border: >
                    [[[ return entity.state==='on'
                      ?'1px solid rgba(132,204,22,0.5)'
                      :'1px solid rgba(255,255,255,0.08)']]]
                - border-radius: 12px
                - padding: 16px 8px
              icon:
                - color: >
                    [[[ return entity.state==='on'?'#a3e635':'#444']]]
              name:
                - color: >
                    [[[ return entity.state==='on'?'#ecfccb':'#444']]]
                - font-size: 12px

          - type: custom:button-card
            entity: switch.fish_tank_uv_sterilizer
            name: UV Sterilizer
            icon: mdi:ultraviolet
            tap_action:
              action: toggle
            styles:
              card:
                - background: >
                    [[[ return entity.state==='on'
                      ?'linear-gradient(135deg,#1a0d2e,#0f0718)'
                      :'linear-gradient(135deg,#141414,#0d0d0d)']]]
                - border: >
                    [[[ return entity.state==='on'
                      ?'1px solid rgba(167,139,250,0.5)'
                      :'1px solid rgba(255,255,255,0.08)']]]
                - border-radius: 12px
                - padding: 16px 8px
              icon:
                - color: >
                    [[[ return entity.state==='on'?'#c4b5fd':'#444']]]
              name:
                - color: >
                    [[[ return entity.state==='on'?'#ede9fe':'#444']]]
                - font-size: 12px

          - type: custom:button-card
            entity: switch.fish_tank_led_lights
            name: LED Lights
            icon: mdi:led-strip-variant
            tap_action:
              action: toggle
            styles:
              card:
                - background: >
                    [[[ return entity.state==='on'
                      ?'linear-gradient(135deg,#1e2a00,#141c00)'
                      :'linear-gradient(135deg,#141414,#0d0d0d)']]]
                - border: >
                    [[[ return entity.state==='on'
                      ?'1px solid rgba(250,204,21,0.4)'
                      :'1px solid rgba(255,255,255,0.08)']]]
                - border-radius: 12px
                - padding: 16px 8px
              icon:
                - color: >
                    [[[ return entity.state==='on'?'#fde047':'#444']]]
              name:
                - color: >
                    [[[ return entity.state==='on'?'#fefce8':'#444']]]
                - font-size: 12px
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(34,197,94,0.2);
              border-radius: 14px;
              padding: 4px;
            }

      # â”€â”€ MAINTENANCE & FEEDING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: entities
        grid-column: 3 / 5
        title: "ğŸ½ Maintenance Log"
        entities:
          - entity: sensor.fish_tank_days_since_water_change
            name: Days Since Water Change
            icon: mdi:water-sync
          - entity: sensor.fish_tank_water_change_due_in
            name: Water Change Due In
            icon: mdi:calendar-clock
          - entity: sensor.fish_tank_days_since_filter_clean
            name: Days Since Filter Clean
            icon: mdi:air-filter
          - entity: sensor.fish_tank_days_since_fert_dose
            name: Days Since Fert Dose
            icon: mdi:leaf
          - entity: sensor.fish_tank_tank_age_days
            name: Tank Age
            icon: mdi:calendar-range
          - entity: input_datetime.fish_tank_last_feeding
            name: Last Feeding
            icon: mdi:food
          - type: button
            name: "ğŸ½ Feed Now"
            action_name: Feed
            tap_action:
              action: call-service
              service: script.fish_tank_feed_now
          - type: button
            name: "ğŸ’§ Log Water Change"
            action_name: Log
            tap_action:
              action: call-service
              service: script.fish_tank_log_water_change
          - type: button
            name: "ğŸ”„ Log Filter Clean"
            action_name: Log
            tap_action:
              action: call-service
              service: script.fish_tank_log_filter_clean
          - type: button
            name: "ğŸŒ¿ Log Fertiliser Dose"
            action_name: Log
            tap_action:
              action: call-service
              service: script.fish_tank_log_fert_dose
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #0d2010, #071408);
              border: 1px solid rgba(102,187,106,0.25);
              border-radius: 14px;
            }

  ###########################################################################
  # VIEW 2 â€” 7-DAY HISTORY
  ###########################################################################
  - title: History
    icon: mdi:chart-line
    path: history
    cards:

      - type: custom:mini-graph-card
        name: "ğŸŒ¡ Temperature â€” 7 Days"
        entities:
          - entity: sensor.fish_tank_temperature
            color: "#ff7043"
        hours_to_show: 168
        points_per_hour: 1
        line_width: 2
        smoothing: true
        show:
          extrema: true
          average: true
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(255,112,67,0.25); border-radius:14px; margin-bottom:8px; }

      - type: custom:mini-graph-card
        name: "âš— pH â€” 7 Days"
        entities:
          - entity: sensor.fish_tank_ph
            color: "#ab47bc"
        hours_to_show: 168
        points_per_hour: 1
        line_width: 2
        smoothing: true
        show:
          extrema: true
          average: true
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(171,71,188,0.25); border-radius:14px; margin-bottom:8px; }

      - type: custom:mini-graph-card
        name: "â˜£ Nitrogen Cycle â€” 7 Days"
        entities:
          - entity: sensor.fish_tank_ammonia
            name: Ammonia
            color: "#ef5350"
          - entity: sensor.fish_tank_nitrite
            name: Nitrite
            color: "#ec407a"
          - entity: sensor.fish_tank_nitrate
            name: Nitrate
            color: "#29b6f6"
        hours_to_show: 168
        points_per_hour: 1
        line_width: 2
        smoothing: true
        show:
          extrema: true
          legend: true
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(239,83,80,0.25); border-radius:14px; margin-bottom:8px; }

      - type: custom:mini-graph-card
        name: "ğŸ«§ Dissolved Oâ‚‚ â€” 7 Days"
        entities:
          - entity: sensor.fish_tank_dissolved_o2
            color: "#26c6da"
        hours_to_show: 168
        points_per_hour: 1
        line_width: 2
        smoothing: true
        show:
          extrema: true
          average: true
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(38,198,218,0.25); border-radius:14px; margin-bottom:8px; }

      - type: custom:mini-graph-card
        name: "ğŸ’§ GH & KH â€” 7 Days"
        entities:
          - entity: sensor.fish_tank_gh
            name: GH
            color: "#4fc3f7"
          - entity: sensor.fish_tank_kh
            name: KH
            color: "#81c784"
        hours_to_show: 168
        points_per_hour: 1
        line_width: 2
        smoothing: true
        show:
          extrema: true
          legend: true
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(79,195,247,0.25); border-radius:14px; margin-bottom:8px; }

      - type: custom:mini-graph-card
        name: "ğŸŒ¿ COâ‚‚ â€” 7 Days"
        entities:
          - entity: sensor.fish_tank_co2
            color: "#a3e635"
        hours_to_show: 168
        points_per_hour: 1
        line_width: 2
        smoothing: true
        show:
          extrema: true
          average: true
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(163,230,53,0.25); border-radius:14px; }

  ###########################################################################
  # VIEW 3 â€” AUTOMATIONS & SETTINGS
  ###########################################################################
  - title: Settings
    icon: mdi:cog
    path: settings
    cards:

      - type: entities
        title: "ğŸ”” Notification Settings"
        entities:
          - entity: input_boolean.fish_tank_alerts_enabled
            name: Alerts Enabled
          - entity: input_boolean.fish_tank_notify_phone
            name: Phone Notifications
          - entity: input_boolean.fish_tank_notify_email
            name: Email Notifications
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(34,197,94,0.2); border-radius:14px; margin-bottom:8px; }

      - type: entities
        title: "ğŸŸ Tank Mode"
        entities:
          - entity: input_boolean.fish_tank_planted_tank
            name: "Planted Tank Mode (enables CO2 and fert)"
          - entity: input_boolean.fish_tank_vacation_mode
            name: Vacation Mode (1x feed/day)
          - entity: input_boolean.fish_tank_cycling
            name: "Cycling Mode (suppresses NH3/NO2 alerts)"
          - entity: input_select.fish_tank_tank_type
            name: Tank Type
          - entity: input_select.fish_tank_water_source
            name: Water Source
          - entity: input_select.fish_tank_filter_type
            name: Filter Type
          - entity: input_datetime.fish_tank_setup_date
            name: Tank Setup Date
          - entity: sensor.fish_tank_tank_age_days
            name: Tank Age (days)
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(34,197,94,0.2); border-radius:14px; margin-bottom:8px; }

      - type: entities
        title: "âš™ï¸ Automation Status"
        entities:
          - entity: automation.fish_tank_high_ammonia_alert
            name: Ammonia Alert
          - entity: automation.fish_tank_nitrite_alert
            name: Nitrite Alert
          - entity: automation.fish_tank_high_nitrate_alert
            name: High Nitrate Alert
          - entity: automation.fish_tank_high_temperature_alert
            name: High Temp Alert
          - entity: automation.fish_tank_low_temperature_alert
            name: Low Temp Alert
          - entity: automation.fish_tank_ph_low_alert
            name: pH Low Alert
          - entity: automation.fish_tank_ph_high_alert
            name: pH High Alert
          - entity: automation.fish_tank_low_oxygen_alert
            name: "Low O2 Alert"
          - entity: automation.fish_tank_high_co2_alert
            name: "High CO2 Alert"
          - entity: automation.fish_tank_lights_on
            name: Lights On (07:00)
          - entity: automation.fish_tank_lights_off
            name: Lights Off (22:00)
          - entity: automation.fish_tank_co2_on
            name: "CO2 On (08:00)"
          - entity: automation.fish_tank_co2_off
            name: "CO2 Off (21:00)"
          - entity: automation.fish_tank_auto_feeding_morning
            name: Morning Feed (08:00)
          - entity: automation.fish_tank_auto_feeding_evening
            name: Evening Feed (18:00)
          - entity: automation.fish_tank_water_change_reminder
            name: Water Change Reminder
          - entity: automation.fish_tank_filter_clean_reminder
            name: Filter Clean Reminder
          - entity: automation.fish_tank_fert_dose_reminder
            name: Fertiliser Reminder
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(102,187,106,0.2); border-radius:14px; margin-bottom:8px; }

      - type: entities
        title: "ğŸ”§ Alert Thresholds"
        entities:
          - entity: input_number.fish_tank_temp_min
            name: Min Safe Temp (Â°F)
          - entity: input_number.fish_tank_temp_max
            name: Max Safe Temp (Â°F)
          - entity: input_number.fish_tank_ph_min
            name: Min Safe pH
          - entity: input_number.fish_tank_ph_max
            name: Max Safe pH
          - entity: input_number.fish_tank_ammonia_max
            name: Max Ammonia (ppm)
          - entity: input_number.fish_tank_nitrite_max
            name: Max Nitrite (ppm)
          - entity: input_number.fish_tank_nitrate_warn
            name: Nitrate Warning (ppm)
          - entity: input_number.fish_tank_nitrate_max
            name: Nitrate Critical (ppm)
          - entity: input_number.fish_tank_o2_min
            name: "Min Dissolved O2 (mg/L)"
          - entity: input_number.fish_tank_gh_min
            name: Min GH (dGH)
          - entity: input_number.fish_tank_gh_max
            name: Max GH (dGH)
          - entity: input_number.fish_tank_kh_min
            name: Min KH (dKH)
          - entity: input_number.fish_tank_kh_max
            name: Max KH (dKH)
          - entity: input_number.fish_tank_co2_min
            name: "Min CO2 - Planted (ppm)"
          - entity: input_number.fish_tank_co2_max
            name: "Max CO2 - Planted (ppm)"
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(255,112,67,0.2); border-radius:14px; margin-bottom:8px; }

      - type: entities
        title: "ğŸ“… Maintenance Intervals"
        entities:
          - entity: input_number.fish_tank_water_change_interval
            name: Water Change Every (days)
          - entity: input_number.fish_tank_filter_clean_interval
            name: Filter Clean Every (days)
          - entity: input_number.fish_tank_fert_dose_interval
            name: Fertiliser Dose Every (days)
          - entity: input_number.fish_tank_daily_feeds
            name: Feeds Per Day
          - entity: input_number.fish_tank_light_hours
            name: Photoperiod (hours/day)
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(34,197,94,0.2); border-radius:14px; margin-bottom:8px; }

      - type: entities
        title: "ğŸ†˜ Emergency Actions"
        entities:
          - type: button
            name: "ğŸ†˜ Emergency Aeration (gasping fish)"
            action_name: Activate
            tap_action:
              action: call-service
              service: script.fish_tank_emergency_aeration
          - type: button
            name: "âœ… All Equipment On"
            action_name: Turn On
            tap_action:
              action: call-service
              service: script.fish_tank_all_equipment_on
          - type: button
            name: "â›” All Equipment Off (maintenance)"
            action_name: Turn Off
            tap_action:
              action: call-service
              service: script.fish_tank_all_equipment_off
        card_mod:
          style: |
            ha-card { background: linear-gradient(135deg,#0d2010,#071408);
              border: 1px solid rgba(239,83,80,0.25); border-radius:14px; }
